{{/*  layouts/partials/related.html - VERSION CENTRALISÉE  */}}

{{ $config := .Site.Data.config }}
{{ $recipe_page := $config.recipe_page }}

{{/* Récupère jusqu'à 3 pages liées, hors page courante */}}
{{ $related := first 3 ( .Site.RegularPages.Related . ) }}
{{ if gt (len $related) 0 }}
  <section class="mt-12">
    <h2 class="text-2xl font-semibold mb-6">{{ $recipe_page.sections.related }}</h2>

    <div class="grid gap-6 md:grid-cols-3">
      {{ range $related }}
        <a href="{{ .RelPermalink }}" class="block rounded-xl overflow-hidden shadow hover:shadow-lg transition">
          {{ with .Params.image }}
            <img src="{{ . }}" alt="" class="w-full h-40 object-cover hover:scale-105 transition-transform duration-300" />
          {{ end }}
          <div class="p-4 bg-white">
            <h3 class="text-lg font-medium leading-snug">{{ .Title }}</h3>
          </div>
        </a>
      {{ end }}
    </div>
  </section>
{{ end }}
